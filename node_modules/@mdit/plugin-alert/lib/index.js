const N=(c,A)=>(e,o,i,S)=>{if(e.sCount[o]-e.blkIndent>=4||e.level!==0&&!A)return!1;const r=e.bMarks[o]+e.tShift[o],n=e.eMarks[o];if(e.src.charCodeAt(r)!==62)return!1;let s=r+1,f=e.sCount[o]+1,R=!1;e.src.charCodeAt(s)===32?(s++,f++):e.src.charCodeAt(s)===9&&((e.bsCount[o]+f)%4===3?(s++,f++):R=!0);let p=f;for(;s<n;){const a=e.src.charCodeAt(s);if(a===9)p+=4-(p+e.bsCount[o]+(R?1:0))%4;else if(a===32)p++;else break;s++}if(p-f>=4||n-s<4||e.src.charCodeAt(s)!==91||e.src.charCodeAt(s+1)!==33)return!1;s+=2;let w="";for(;s<n;){const a=e.src.charAt(s);if(a==="]")break;w+=a,s++}if(s===n)return!1;const k=w.toLowerCase();if(!c.has(k)||(s=e.skipSpaces(s+1),s<n))return!1;if(S)return!0;const h=[],C=[],d=[],b=[],J=e.lineMax,L=e.parentType,$=[e.md.block.ruler.getRules("blockquote"),e.md.block.ruler.getRules("alert")].flat();e.parentType="alert";let t;for(t=o;t<i;t++){const a=e.sCount[t]<e.blkIndent;let l=e.bMarks[t]+e.tShift[t];const _=e.eMarks[t];if(l>=_)break;let q=!1;if(e.src.charCodeAt(l++)===62&&!a){let u=e.sCount[t]+1,g=!1,y=!1;e.src.charCodeAt(l)===32?(l++,u++,g=!0):e.src.charCodeAt(l)===9&&(g=!0,(e.bsCount[t]+u)%4===3?(l++,u++):y=!0);let M=u;for(h.push(e.bMarks[t]),e.bMarks[t]=l;l<_;){const T=e.src.charCodeAt(l);if(T===9)M+=4-(M+e.bsCount[t]+(y?1:0))%4;else if(T===32)M++;else break;l++}q=l>=_,C.push(e.bsCount[t]),e.bsCount[t]=e.sCount[t]+1+(g?1:0),d.push(e.sCount[t]),e.sCount[t]=M-u,b.push(e.tShift[t]),e.tShift[t]=l-e.bMarks[t];continue}if(q)break;let v=!1;for(const u of $)if(u(e,t,i,!0)){v=!0;break}if(v){e.lineMax=t,e.blkIndent!==0&&(h.push(e.bMarks[t]),C.push(e.bsCount[t]),d.push(e.sCount[t]),b.push(e.tShift[t]),e.sCount[t]-=e.blkIndent);break}h.push(e.bMarks[t]),C.push(e.bsCount[t]),d.push(e.sCount[t]),b.push(e.tShift[t]),e.sCount[t]=-1}const j=e.blkIndent;e.blkIndent=0;const z=[o,o+1],x=[o+1,0],I=e.push("alert_open","div",1);I.markup=k,I.attrJoin("class",`markdown-alert markdown-alert-${k}`),I.map=x;const m=e.push("alert_title","",0);m.attrJoin("class","markdown-alert-title"),m.markup=k,m.content=w,m.map=z,e.md.block.tokenize(e,o+1,t);const B=e.push("alert_close","div",-1);B.markup=k,e.lineMax=J,e.parentType=L,x[1]=e.line;for(let a=0;a<b.length;a++)e.bMarks[a+o]=h[a],e.tShift[a+o]=b[a],e.sCount[a+o]=d[a],e.bsCount[a+o]=C[a];return e.blkIndent=j,!0},O=(c,{alertNames:A=["tip","warning","caution","important","note"],deep:e=!1,openRender:o,closeRender:i,titleRender:S}={})=>{c.block.ruler.before("blockquote","alert",N(new Set(A.map(r=>r.toLowerCase())),e),{alt:["paragraph","reference","blockquote","list"]}),o&&(c.renderer.rules.alert_open=o),i&&(c.renderer.rules.alert_close=i),c.renderer.rules.alert_title=S??((r,n)=>{const s=r[n];return`<p class="markdown-alert-title">${s.content[0].toUpperCase()+s.content.slice(1).toLowerCase()}</p>
`})};export{O as alert};
//# sourceMappingURL=index.js.map
