import{watchImmediate as m}from"@vueuse/core";import{isRef as s,toValue as o,inject as f,computed as l,ref as p}from"vue";import{useSiteLocale as _,withBase as S,useFrontmatter as d}from"vuepress/client";import{Watermark as g}from"watermark-js-plus";import{isPlainObject as k,isFunction as v}from"@vuepress/helper/client";const h=(e,t)=>{if(__VUEPRESS_SSR__)return;const n=_(),r=new g,c=()=>{if(o(t)){const a={content:n.value.title,fontColor:"#76747f",globalAlpha:o(e).mode==="blind"?.005:.165,...o(e)};a.image?.startsWith("/")&&(a.image=S(a.image)),r.changeOptions(a)}else r.destroy()};m([t,s(e)?e:null],c,{flush:"post"})},u=Symbol(__VUEPRESS_DEV__?"watermark":""),i=p({}),W=e=>{s(e)?m(e,t=>{i.value=t}):v(e)?m(l(e),t=>{i.value=t}):i.value=e},w=e=>{const t=f(u),n=d();return l(()=>{const{watermark:r}=n.value;return{...o(e),...t.value,...k(r)?r:{}}})},E=e=>{e.provide(u,i)};export{W as defineWatermarkConfig,E as injectWatermarkConfig,h as setupWatermark,w as useWatermarkOptions};
//# sourceMappingURL=index.js.map
