!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).WatermarkPlus={})}(this,(function(t){"use strict";var e,n,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i={};function o(){if(n)return e;n=1;var t=function(t){return t&&t.Math===Math&&t};return e=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof r&&r)||t("object"==typeof e&&e)||function(){return this}()||Function("return this")()}var a,s,u,c,l,d,f,h,p={};function v(){return s?a:(s=1,a=function(t){try{return!!t()}catch(t){return!0}})}function y(){if(c)return u;c=1;var t=v();return u=!t((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))}function m(){if(d)return l;d=1;var t=v();return l=!t((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))}function g(){if(h)return f;h=1;var t=m(),e=Function.prototype.call;return f=t?e.bind(e):function(){return e.apply(e,arguments)},f}var w,b,x,S,O,P,E,T,k,C,A,j,_,R,L,D,I,B,H,N,U,M,F,W,z,G,q,V,X,Y,$,K,J,Z,Q,tt,et,nt,rt,it,ot,at={};function st(){return x?b:(x=1,b=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}})}function ut(){if(O)return S;O=1;var t=m(),e=Function.prototype,n=e.call,r=t&&e.bind.bind(n,n);return S=t?r:function(t){return function(){return n.apply(t,arguments)}},S}function ct(){if(E)return P;E=1;var t=ut(),e=t({}.toString),n=t("".slice);return P=function(t){return n(e(t),8,-1)}}function lt(){return A?C:(A=1,C=function(t){return null==t})}function dt(){if(_)return j;_=1;var t=lt(),e=TypeError;return j=function(n){if(t(n))throw new e("Can't call method on "+n);return n}}function ft(){if(L)return R;L=1;var t=function(){if(k)return T;k=1;var t=ut(),e=v(),n=ct(),r=Object,i=t("".split);return T=e((function(){return!r("z").propertyIsEnumerable(0)}))?function(t){return"String"===n(t)?i(t,""):r(t)}:r}(),e=dt();return R=function(n){return t(e(n))}}function ht(){if(I)return D;I=1;var t="object"==typeof document&&document.all;return D=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(t){return"function"==typeof t}}function pt(){if(H)return B;H=1;var t=ht();return B=function(e){return"object"==typeof e?null!==e:t(e)}}function vt(){if(U)return N;U=1;var t=o(),e=ht();return N=function(n,r){return arguments.length<2?(i=t[n],e(i)?i:void 0):t[n]&&t[n][r];var i},N}function yt(){if(F)return M;F=1;var t=ut();return M=t({}.isPrototypeOf)}function mt(){if(z)return W;z=1;var t=o().navigator,e=t&&t.userAgent;return W=e?String(e):""}function gt(){if(q)return G;q=1;var t,e,n=o(),r=mt(),i=n.process,a=n.Deno,s=i&&i.versions||a&&a.version,u=s&&s.v8;return u&&(e=(t=u.split("."))[0]>0&&t[0]<4?1:+(t[0]+t[1])),!e&&r&&(!(t=r.match(/Edge\/(\d+)/))||t[1]>=74)&&(t=r.match(/Chrome\/(\d+)/))&&(e=+t[1]),G=e}function wt(){if(X)return V;X=1;var t=gt(),e=v(),n=o().String;return V=!!Object.getOwnPropertySymbols&&!e((function(){var e=Symbol("symbol detection");return!n(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&t&&t<41}))}function bt(){if($)return Y;$=1;var t=wt();return Y=t&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}function xt(){if(J)return K;J=1;var t=vt(),e=ht(),n=yt(),r=bt(),i=Object;return K=r?function(t){return"symbol"==typeof t}:function(r){var o=t("Symbol");return e(o)&&n(o.prototype,i(r))}}function St(){if(Q)return Z;Q=1;var t=String;return Z=function(e){try{return t(e)}catch(t){return"Object"}}}function Ot(){if(et)return tt;et=1;var t=ht(),e=St(),n=TypeError;return tt=function(r){if(t(r))return r;throw new n(e(r)+" is not a function")}}function Pt(){if(rt)return nt;rt=1;var t=Ot(),e=lt();return nt=function(n,r){var i=n[r];return e(i)?void 0:t(i)}}function Et(){if(ot)return it;ot=1;var t=g(),e=ht(),n=pt(),r=TypeError;return it=function(i,o){var a,s;if("string"===o&&e(a=i.toString)&&!n(s=t(a,i)))return s;if(e(a=i.valueOf)&&!n(s=t(a,i)))return s;if("string"!==o&&e(a=i.toString)&&!n(s=t(a,i)))return s;throw new r("Can't convert object to primitive value")}}var Tt,kt,Ct,At,jt,_t,Rt,Lt,Dt,It,Bt,Ht,Nt,Ut,Mt,Ft,Wt,zt,Gt,qt,Vt,Xt,Yt,$t,Kt={exports:{}};function Jt(){return kt?Tt:(kt=1,Tt=!1)}function Zt(){if(At)return Ct;At=1;var t=o(),e=Object.defineProperty;return Ct=function(n,r){try{e(t,n,{value:r,configurable:!0,writable:!0})}catch(e){t[n]=r}return r}}function Qt(){if(jt)return Kt.exports;jt=1;var t=Jt(),e=o(),n=Zt(),r="__core-js_shared__",i=Kt.exports=e[r]||n(r,{});return(i.versions||(i.versions=[])).push({version:"3.42.0",mode:t?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"}),Kt.exports}function te(){if(Rt)return _t;Rt=1;var t=Qt();return _t=function(e,n){return t[e]||(t[e]=n||{})}}function ee(){if(Dt)return Lt;Dt=1;var t=dt(),e=Object;return Lt=function(n){return e(t(n))}}function ne(){if(Bt)return It;Bt=1;var t=ut(),e=ee(),n=t({}.hasOwnProperty);return It=Object.hasOwn||function(t,r){return n(e(t),r)}}function re(){if(Nt)return Ht;Nt=1;var t=ut(),e=0,n=Math.random(),r=t(1..toString);return Ht=function(t){return"Symbol("+(void 0===t?"":t)+")_"+r(++e+n,36)}}function ie(){if(Mt)return Ut;Mt=1;var t=o(),e=te(),n=ne(),r=re(),i=wt(),a=bt(),s=t.Symbol,u=e("wks"),c=a?s.for||s:s&&s.withoutSetter||r;return Ut=function(t){return n(u,t)||(u[t]=i&&n(s,t)?s[t]:c("Symbol."+t)),u[t]}}function oe(){if(Wt)return Ft;Wt=1;var t=g(),e=pt(),n=xt(),r=Pt(),i=Et(),o=ie(),a=TypeError,s=o("toPrimitive");return Ft=function(o,u){if(!e(o)||n(o))return o;var c,l=r(o,s);if(l){if(void 0===u&&(u="default"),c=t(l,o,u),!e(c)||n(c))return c;throw new a("Can't convert object to primitive value")}return void 0===u&&(u="number"),i(o,u)}}function ae(){if(Gt)return zt;Gt=1;var t=oe(),e=xt();return zt=function(n){var r=t(n,"string");return e(r)?r:r+""}}function se(){if(Vt)return qt;Vt=1;var t=o(),e=pt(),n=t.document,r=e(n)&&e(n.createElement);return qt=function(t){return r?n.createElement(t):{}}}function ue(){if(Yt)return Xt;Yt=1;var t=y(),e=v(),n=se();return Xt=!t&&!e((function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))}function ce(){if($t)return p;$t=1;var t=y(),e=g(),n=function(){if(w)return at;w=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,n=e&&!t.call({1:2},1);return at.f=n?function(t){var n=e(this,t);return!!n&&n.enumerable}:t,at}(),r=st(),i=ft(),o=ae(),a=ne(),s=ue(),u=Object.getOwnPropertyDescriptor;return p.f=t?u:function(t,c){if(t=i(t),c=o(c),s)try{return u(t,c)}catch(t){}if(a(t,c))return r(!e(n.f,t,c),t[c])},p}var le,de,fe,he,pe,ve,ye,me={};function ge(){if(de)return le;de=1;var t=y(),e=v();return le=t&&e((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))}function we(){if(he)return fe;he=1;var t=pt(),e=String,n=TypeError;return fe=function(r){if(t(r))return r;throw new n(e(r)+" is not an object")}}function be(){if(pe)return me;pe=1;var t=y(),e=ue(),n=ge(),r=we(),i=ae(),o=TypeError,a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,u="enumerable",c="configurable",l="writable";return me.f=t?n?function(t,e,n){if(r(t),e=i(e),r(n),"function"==typeof t&&"prototype"===e&&"value"in n&&l in n&&!n[l]){var o=s(t,e);o&&o[l]&&(t[e]=n.value,n={configurable:c in n?n[c]:o[c],enumerable:u in n?n[u]:o[u],writable:!1})}return a(t,e,n)}:a:function(t,n,s){if(r(t),n=i(n),r(s),e)try{return a(t,n,s)}catch(t){}if("get"in s||"set"in s)throw new o("Accessors not supported");return"value"in s&&(t[n]=s.value),t},me}function xe(){if(ye)return ve;ye=1;var t=y(),e=be(),n=st();return ve=t?function(t,r,i){return e.f(t,r,n(1,i))}:function(t,e,n){return t[e]=n,t}}var Se,Oe,Pe,Ee,Te,ke,Ce,Ae,je,_e,Re,Le,De,Ie,Be,He={exports:{}};function Ne(){if(Ee)return Pe;Ee=1;var t=ut(),e=ht(),n=Qt(),r=t(Function.toString);return e(n.inspectSource)||(n.inspectSource=function(t){return r(t)}),Pe=n.inspectSource}function Ue(){if(Ae)return Ce;Ae=1;var t=te(),e=re(),n=t("keys");return Ce=function(t){return n[t]||(n[t]=e(t))}}function Me(){return _e?je:(_e=1,je={})}function Fe(){if(Le)return Re;Le=1;var t,e,n,r=function(){if(ke)return Te;ke=1;var t=o(),e=ht(),n=t.WeakMap;return Te=e(n)&&/native code/.test(String(n))}(),i=o(),a=pt(),s=xe(),u=ne(),c=Qt(),l=Ue(),d=Me(),f="Object already initialized",h=i.TypeError,p=i.WeakMap;if(r||c.state){var v=c.state||(c.state=new p);v.get=v.get,v.has=v.has,v.set=v.set,t=function(t,e){if(v.has(t))throw new h(f);return e.facade=t,v.set(t,e),e},e=function(t){return v.get(t)||{}},n=function(t){return v.has(t)}}else{var y=l("state");d[y]=!0,t=function(t,e){if(u(t,y))throw new h(f);return e.facade=t,s(t,y,e),e},e=function(t){return u(t,y)?t[y]:{}},n=function(t){return u(t,y)}}return Re={set:t,get:e,has:n,enforce:function(r){return n(r)?e(r):t(r,{})},getterFor:function(t){return function(n){var r;if(!a(n)||(r=e(n)).type!==t)throw new h("Incompatible receiver, "+t+" required");return r}}}}function We(){if(De)return He.exports;De=1;var t=ut(),e=v(),n=ht(),r=ne(),i=y(),o=function(){if(Oe)return Se;Oe=1;var t=y(),e=ne(),n=Function.prototype,r=t&&Object.getOwnPropertyDescriptor,i=e(n,"name"),o=i&&"something"===function(){}.name,a=i&&(!t||t&&r(n,"name").configurable);return Se={EXISTS:i,PROPER:o,CONFIGURABLE:a}}().CONFIGURABLE,a=Ne(),s=Fe(),u=s.enforce,c=s.get,l=String,d=Object.defineProperty,f=t("".slice),h=t("".replace),p=t([].join),m=i&&!e((function(){return 8!==d((function(){}),"length",{value:8}).length})),g=String(String).split("String"),w=He.exports=function(t,e,n){"Symbol("===f(l(e),0,7)&&(e="["+h(l(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!r(t,"name")||o&&t.name!==e)&&(i?d(t,"name",{value:e,configurable:!0}):t.name=e),m&&n&&r(n,"arity")&&t.length!==n.arity&&d(t,"length",{value:n.arity});try{n&&r(n,"constructor")&&n.constructor?i&&d(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var a=u(t);return r(a,"source")||(a.source=p(g,"string"==typeof e?e:"")),t};return Function.prototype.toString=w((function(){return n(this)&&c(this).source||a(this)}),"toString"),He.exports}function ze(){if(Be)return Ie;Be=1;var t=ht(),e=be(),n=We(),r=Zt();return Ie=function(i,o,a,s){s||(s={});var u=s.enumerable,c=void 0!==s.name?s.name:o;if(t(a)&&n(a,c,s),s.global)u?i[o]=a:r(o,a);else{try{s.unsafe?i[o]&&(u=!0):delete i[o]}catch(t){}u?i[o]=a:e.f(i,o,{value:a,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return i}}var Ge,qe,Ve,Xe,Ye,$e,Ke,Je,Ze,Qe,tn,en,nn,rn,on,an,sn,un={};function cn(){if(Xe)return Ve;Xe=1;var t=function(){if(qe)return Ge;qe=1;var t=Math.ceil,e=Math.floor;return Ge=Math.trunc||function(n){var r=+n;return(r>0?e:t)(r)}}();return Ve=function(e){var n=+e;return n!=n||0===n?0:t(n)}}function ln(){if($e)return Ye;$e=1;var t=cn(),e=Math.max,n=Math.min;return Ye=function(r,i){var o=t(r);return o<0?e(o+i,0):n(o,i)}}function dn(){if(Je)return Ke;Je=1;var t=cn(),e=Math.min;return Ke=function(n){var r=t(n);return r>0?e(r,9007199254740991):0}}function fn(){if(Qe)return Ze;Qe=1;var t=dn();return Ze=function(e){return t(e.length)}}function hn(){if(en)return tn;en=1;var t=ft(),e=ln(),n=fn(),r=function(r){return function(i,o,a){var s=t(i),u=n(s);if(0===u)return!r&&-1;var c,l=e(a,u);if(r&&o!=o){for(;u>l;)if((c=s[l++])!=c)return!0}else for(;u>l;l++)if((r||l in s)&&s[l]===o)return r||l||0;return!r&&-1}};return tn={includes:r(!0),indexOf:r(!1)}}function pn(){if(rn)return nn;rn=1;var t=ut(),e=ne(),n=ft(),r=hn().indexOf,i=Me(),o=t([].push);return nn=function(t,a){var s,u=n(t),c=0,l=[];for(s in u)!e(i,s)&&e(u,s)&&o(l,s);for(;a.length>c;)e(u,s=a[c++])&&(~r(l,s)||o(l,s));return l}}function vn(){return an?on:(an=1,on=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"])}var yn,mn,gn,wn,bn,xn,Sn,On,Pn,En,Tn,kn,Cn,An,jn,_n,Rn,Ln,Dn,In,Bn,Hn,Nn,Un,Mn,Fn,Wn,zn,Gn,qn,Vn,Xn,Yn,$n,Kn,Jn,Zn,Qn,tr={};function er(){if(gn)return mn;gn=1;var t=vt(),e=ut(),n=function(){if(sn)return un;sn=1;var t=pn(),e=vn().concat("length","prototype");return un.f=Object.getOwnPropertyNames||function(n){return t(n,e)},un}(),r=(yn||(yn=1,tr.f=Object.getOwnPropertySymbols),tr),i=we(),o=e([].concat);return mn=t("Reflect","ownKeys")||function(t){var e=n.f(i(t)),a=r.f;return a?o(e,a(t)):e}}function nr(){if(bn)return wn;bn=1;var t=ne(),e=er(),n=ce(),r=be();return wn=function(i,o,a){for(var s=e(o),u=r.f,c=n.f,l=0;l<s.length;l++){var d=s[l];t(i,d)||a&&t(a,d)||u(i,d,c(o,d))}}}function rr(){if(Sn)return xn;Sn=1;var t=v(),e=ht(),n=/#|\.prototype\./,r=function(n,r){var u=o[i(n)];return u===s||u!==a&&(e(r)?t(r):!!r)},i=r.normalize=function(t){return String(t).replace(n,".").toLowerCase()},o=r.data={},a=r.NATIVE="N",s=r.POLYFILL="P";return xn=r}function ir(){if(Pn)return On;Pn=1;var t=o(),e=ce().f,n=xe(),r=ze(),i=Zt(),a=nr(),s=rr();return On=function(o,u){var c,l,d,f,h,p=o.target,v=o.global,y=o.stat;if(c=v?t:y?t[p]||i(p,{}):t[p]&&t[p].prototype)for(l in u){if(f=u[l],d=o.dontCallGetSet?(h=e(c,l))&&h.value:c[l],!s(v?l:p+(y?".":"#")+l,o.forced)&&void 0!==d){if(typeof f==typeof d)continue;a(f,d)}(o.sham||d&&d.sham)&&n(f,"sham",!0),r(c,l,f,o)}}}function or(){if(Cn)return kn;Cn=1;var t=function(){if(Tn)return En;Tn=1;var t=ct(),e=ut();return En=function(n){if("Function"===t(n))return e(n)}}(),e=Ot(),n=m(),r=t(t.bind);return kn=function(t,i){return e(t),void 0===i?t:n?r(t,i):function(){return t.apply(i,arguments)}},kn}function ar(){if(jn)return An;jn=1;var t=g(),e=we(),n=Pt();return An=function(r,i,o){var a,s;e(r);try{if(!(a=n(r,"return"))){if("throw"===i)throw o;return o}a=t(a,r)}catch(t){s=!0,a=t}if("throw"===i)throw o;if(s)throw a;return e(a),o}}function sr(){if(Rn)return _n;Rn=1;var t=we(),e=ar();return _n=function(n,r,i,o){try{return o?r(t(i)[0],i[1]):r(i)}catch(t){e(n,"throw",t)}}}function ur(){return Dn?Ln:(Dn=1,Ln={})}function cr(){if(Bn)return In;Bn=1;var t=ie(),e=ur(),n=t("iterator"),r=Array.prototype;return In=function(t){return void 0!==t&&(e.Array===t||r[n]===t)}}function lr(){if(Mn)return Un;Mn=1;var t=function(){if(Nn)return Hn;Nn=1;var t={};return t[ie()("toStringTag")]="z",Hn="[object z]"===String(t)}(),e=ht(),n=ct(),r=ie()("toStringTag"),i=Object,o="Arguments"===n(function(){return arguments}());return Un=t?n:function(t){var a,s,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(s=function(t,e){try{return t[e]}catch(t){}}(a=i(t),r))?s:o?n(a):"Object"===(u=n(a))&&e(a.callee)?"Arguments":u}}function dr(){if(Wn)return Fn;Wn=1;var t=ut(),e=v(),n=ht(),r=lr(),i=vt(),o=Ne(),a=function(){},s=i("Reflect","construct"),u=/^\s*(?:class|function)\b/,c=t(u.exec),l=!u.test(a),d=function(t){if(!n(t))return!1;try{return s(a,[],t),!0}catch(t){return!1}},f=function(t){if(!n(t))return!1;switch(r(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return l||!!c(u,o(t))}catch(t){return!0}};return f.sham=!0,Fn=!s||e((function(){var t;return d(d.call)||!d(Object)||!d((function(){t=!0}))||t}))?f:d}function fr(){if(Gn)return zn;Gn=1;var t=y(),e=be(),n=st();return zn=function(r,i,o){t?e.f(r,i,n(0,o)):r[i]=o}}function hr(){if(Vn)return qn;Vn=1;var t=lr(),e=Pt(),n=lt(),r=ur(),i=ie()("iterator");return qn=function(o){if(!n(o))return e(o,i)||e(o,"@@iterator")||r[t(o)]}}function pr(){if(Yn)return Xn;Yn=1;var t=g(),e=Ot(),n=we(),r=St(),i=hr(),o=TypeError;return Xn=function(a,s){var u=arguments.length<2?i(a):s;if(e(u))return n(t(u,a));throw new o(r(a)+" is not iterable")},Xn}function vr(){if(Zn)return Jn;Zn=1;var t=ie()("iterator"),e=!1;try{var n=0,r={next:function(){return{done:!!n++}},return:function(){e=!0}};r[t]=function(){return this},Array.from(r,(function(){throw 2}))}catch(t){}return Jn=function(n,r){try{if(!r&&!e)return!1}catch(t){return!1}var i=!1;try{var o={};o[t]=function(){return{next:function(){return{done:i=!0}}}},n(o)}catch(t){}return i}}!function(){if(Qn)return i;Qn=1;var t=ir(),e=function(){if(Kn)return $n;Kn=1;var t=or(),e=g(),n=ee(),r=sr(),i=cr(),o=dr(),a=fn(),s=fr(),u=pr(),c=hr(),l=Array;return $n=function(d){var f=n(d),h=o(this),p=arguments.length,v=p>1?arguments[1]:void 0,y=void 0!==v;y&&(v=t(v,p>2?arguments[2]:void 0));var m,g,w,b,x,S,O=c(f),P=0;if(!O||this===l&&i(O))for(m=a(f),g=h?new this(m):l(m);m>P;P++)S=y?v(f[P],P):f[P],s(g,P,S);else for(g=h?new this:[],x=(b=u(f,O)).next;!(w=e(x,b)).done;P++)S=y?r(b,v,[w.value,P],!0):w.value,s(g,P,S);return g.length=P,g},$n}();t({target:"Array",stat:!0,forced:!vr()((function(t){Array.from(t)}))},{from:e})}();var yr,mr,gr,wr,br,xr,Sr,Or,Pr,Er,Tr,kr,Cr,Ar,jr,_r,Rr,Lr,Dr,Ir,Br,Hr,Nr,Ur,Mr,Fr,Wr,zr,Gr,qr,Vr,Xr,Yr,$r,Kr,Jr,Zr,Qr,ti,ei,ni,ri,ii,oi,ai,si,ui,ci,li,di,fi,hi,pi,vi,yi={};function mi(){if(mr)return yr;mr=1;var t=o(),e=mt(),n=ct(),r=function(t){return e.slice(0,t.length)===t};return yr=r("Bun/")?"BUN":r("Cloudflare-Workers")?"CLOUDFLARE":r("Deno/")?"DENO":r("Node.js/")?"NODE":t.Bun&&"string"==typeof Bun.version?"BUN":t.Deno&&"object"==typeof Deno.version?"DENO":"process"===n(t.process)?"NODE":t.window&&t.document?"BROWSER":"REST"}function gi(){if(wr)return gr;wr=1;var t=mi();return gr="NODE"===t}function wi(){if(Or)return Sr;Or=1;var t=pt();return Sr=function(e){return t(e)||null===e}}function bi(){if(Er)return Pr;Er=1;var t=wi(),e=String,n=TypeError;return Pr=function(r){if(t(r))return r;throw new n("Can't set "+e(r)+" as a prototype")}}function xi(){if(kr)return Tr;kr=1;var t=function(){if(xr)return br;xr=1;var t=ut(),e=Ot();return br=function(n,r,i){try{return t(e(Object.getOwnPropertyDescriptor(n,r)[i]))}catch(t){}}}(),e=pt(),n=dt(),r=bi();return Tr=Object.setPrototypeOf||("__proto__"in{}?function(){var i,o=!1,a={};try{(i=t(Object.prototype,"__proto__","set"))(a,[]),o=a instanceof Array}catch(t){}return function(t,a){return n(t),r(a),e(t)?(o?i(t,a):t.__proto__=a,t):t}}():void 0)}function Si(){if(Ar)return Cr;Ar=1;var t=be().f,e=ne(),n=ie()("toStringTag");return Cr=function(r,i,o){r&&!o&&(r=r.prototype),r&&!e(r,n)&&t(r,n,{configurable:!0,value:i})}}function Oi(){if(_r)return jr;_r=1;var t=We(),e=be();return jr=function(n,r,i){return i.get&&t(i.get,r,{getter:!0}),i.set&&t(i.set,r,{setter:!0}),e.f(n,r,i)}}function Pi(){if(Lr)return Rr;Lr=1;var t=vt(),e=Oi(),n=ie(),r=y(),i=n("species");return Rr=function(n){var o=t(n);r&&o&&!o[i]&&e(o,i,{configurable:!0,get:function(){return this}})}}function Ei(){if(Ir)return Dr;Ir=1;var t=yt(),e=TypeError;return Dr=function(n,r){if(t(r,n))return n;throw new e("Incorrect invocation")}}function Ti(){if(Hr)return Br;Hr=1;var t=dr(),e=St(),n=TypeError;return Br=function(r){if(t(r))return r;throw new n(e(r)+" is not a constructor")}}function ki(){if(Ur)return Nr;Ur=1;var t=we(),e=Ti(),n=lt(),r=ie()("species");return Nr=function(i,o){var a,s=t(i).constructor;return void 0===s||n(a=t(s)[r])?o:e(a)}}function Ci(){if(Fr)return Mr;Fr=1;var t=m(),e=Function.prototype,n=e.apply,r=e.call;return Mr="object"==typeof Reflect&&Reflect.apply||(t?r.bind(n):function(){return r.apply(n,arguments)}),Mr}function Ai(){if(zr)return Wr;zr=1;var t=vt();return Wr=t("document","documentElement")}function ji(){if(qr)return Gr;qr=1;var t=ut();return Gr=t([].slice)}function _i(){if(Xr)return Vr;Xr=1;var t=TypeError;return Vr=function(e,n){if(e<n)throw new t("Not enough arguments");return e}}function Ri(){if($r)return Yr;$r=1;var t=mt();return Yr=/(?:ipad|iphone|ipod).*applewebkit/i.test(t)}function Li(){if(Jr)return Kr;Jr=1;var t,e,n,r,i=o(),a=Ci(),s=or(),u=ht(),c=ne(),l=v(),d=Ai(),f=ji(),h=se(),p=_i(),y=Ri(),m=gi(),g=i.setImmediate,w=i.clearImmediate,b=i.process,x=i.Dispatch,S=i.Function,O=i.MessageChannel,P=i.String,E=0,T={},k="onreadystatechange";l((function(){t=i.location}));var C=function(t){if(c(T,t)){var e=T[t];delete T[t],e()}},A=function(t){return function(){C(t)}},j=function(t){C(t.data)},_=function(e){i.postMessage(P(e),t.protocol+"//"+t.host)};return g&&w||(g=function(t){p(arguments.length,1);var n=u(t)?t:S(t),r=f(arguments,1);return T[++E]=function(){a(n,void 0,r)},e(E),E},w=function(t){delete T[t]},m?e=function(t){b.nextTick(A(t))}:x&&x.now?e=function(t){x.now(A(t))}:O&&!y?(r=(n=new O).port2,n.port1.onmessage=j,e=s(r.postMessage,r)):i.addEventListener&&u(i.postMessage)&&!i.importScripts&&t&&"file:"!==t.protocol&&!l(_)?(e=_,i.addEventListener("message",j,!1)):e=k in h("script")?function(t){d.appendChild(h("script"))[k]=function(){d.removeChild(this),C(t)}}:function(t){setTimeout(A(t),0)}),Kr={set:g,clear:w}}function Di(){if(Qr)return Zr;Qr=1;var t=o(),e=y(),n=Object.getOwnPropertyDescriptor;return Zr=function(r){if(!e)return t[r];var i=n(t,r);return i&&i.value}}function Ii(){if(ei)return ti;ei=1;var t=function(){this.head=null,this.tail=null};return t.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},ti=t}function Bi(){if(si)return ai;si=1;var t,e,n,r,i,a=o(),s=Di(),u=or(),c=Li().set,l=Ii(),d=Ri(),f=function(){if(ri)return ni;ri=1;var t=mt();return ni=/ipad|iphone|ipod/i.test(t)&&"undefined"!=typeof Pebble}(),h=function(){if(oi)return ii;oi=1;var t=mt();return ii=/web0s(?!.*chrome)/i.test(t)}(),p=gi(),v=a.MutationObserver||a.WebKitMutationObserver,y=a.document,m=a.process,g=a.Promise,w=s("queueMicrotask");if(!w){var b=new l,x=function(){var e,n;for(p&&(e=m.domain)&&e.exit();n=b.get();)try{n()}catch(e){throw b.head&&t(),e}e&&e.enter()};d||p||h||!v||!y?!f&&g&&g.resolve?((r=g.resolve(void 0)).constructor=g,i=u(r.then,r),t=function(){i(x)}):p?t=function(){m.nextTick(x)}:(c=u(c,a),t=function(){c(x)}):(e=!0,n=y.createTextNode(""),new v(x).observe(n,{characterData:!0}),t=function(){n.data=e=!e}),w=function(e){b.head||t(),b.add(e)}}return ai=w}function Hi(){return ci?ui:(ci=1,ui=function(t,e){})}function Ni(){return di?li:(di=1,li=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}})}function Ui(){if(hi)return fi;hi=1;var t=o();return fi=t.Promise}function Mi(){if(vi)return pi;vi=1;var t=o(),e=Ui(),n=ht(),r=rr(),i=Ne(),a=ie(),s=mi(),u=Jt(),c=gt(),l=e&&e.prototype,d=a("species"),f=!1,h=n(t.PromiseRejectionEvent),p=r("Promise",(function(){var t=i(e),n=t!==String(e);if(!n&&66===c)return!0;if(u&&(!l.catch||!l.finally))return!0;if(!c||c<51||!/native code/.test(t)){var r=new e((function(t){t(1)})),o=function(t){t((function(){}),(function(){}))};if((r.constructor={})[d]=o,!(f=r.then((function(){}))instanceof o))return!0}return!(n||"BROWSER"!==s&&"DENO"!==s||h)}));return pi={CONSTRUCTOR:p,REJECTION_EVENT:h,SUBCLASSING:f}}var Fi,Wi,zi={};function Gi(){if(Fi)return zi;Fi=1;var t=Ot(),e=TypeError,n=function(n){var r,i;this.promise=new n((function(t,n){if(void 0!==r||void 0!==i)throw new e("Bad Promise constructor");r=t,i=n})),this.resolve=t(r),this.reject=t(i)};return zi.f=function(t){return new n(t)},zi}var qi,Vi,Xi,Yi,$i,Ki={};function Ji(){if(Vi)return qi;Vi=1;var t=or(),e=g(),n=we(),r=St(),i=cr(),o=fn(),a=yt(),s=pr(),u=hr(),c=ar(),l=TypeError,d=function(t,e){this.stopped=t,this.result=e},f=d.prototype;return qi=function(h,p,v){var y,m,g,w,b,x,S,O=v&&v.that,P=!(!v||!v.AS_ENTRIES),E=!(!v||!v.IS_RECORD),T=!(!v||!v.IS_ITERATOR),k=!(!v||!v.INTERRUPTED),C=t(p,O),A=function(t){return y&&c(y,"normal",t),new d(!0,t)},j=function(t){return P?(n(t),k?C(t[0],t[1],A):C(t[0],t[1])):k?C(t,A):C(t)};if(E)y=h.iterator;else if(T)y=h;else{if(!(m=u(h)))throw new l(r(h)+" is not iterable");if(i(m)){for(g=0,w=o(h);w>g;g++)if((b=j(h[g]))&&a(f,b))return b;return new d(!1)}y=s(h,m)}for(x=E?h.next:y.next;!(S=e(x,y)).done;){try{b=j(S.value)}catch(t){c(y,"throw",t)}if("object"==typeof b&&b&&a(f,b))return b}return new d(!1)}}function Zi(){if(Yi)return Xi;Yi=1;var t=Ui(),e=vr(),n=Mi().CONSTRUCTOR;return Xi=n||!e((function(e){t.all(e).then(void 0,(function(){}))}))}var Qi,to={};var eo,no={};var ro,io={};var oo,ao,so,uo,co={};function lo(){if(ao)return oo;ao=1;var t=we(),e=pt(),n=Gi();return oo=function(r,i){if(t(r),e(i)&&i.constructor===r)return i;var o=n.f(r);return(0,o.resolve)(i),o.promise}}uo||(uo=1,function(){if(Wi)return yi;Wi=1;var t,e,n,r=ir(),i=Jt(),a=gi(),s=o(),u=g(),c=ze(),l=xi(),d=Si(),f=Pi(),h=Ot(),p=ht(),v=pt(),y=Ei(),m=ki(),w=Li().set,b=Bi(),x=Hi(),S=Ni(),O=Ii(),P=Fe(),E=Ui(),T=Mi(),k=Gi(),C="Promise",A=T.CONSTRUCTOR,j=T.REJECTION_EVENT,_=T.SUBCLASSING,R=P.getterFor(C),L=P.set,D=E&&E.prototype,I=E,B=D,H=s.TypeError,N=s.document,U=s.process,M=k.f,F=M,W=!!(N&&N.createEvent&&s.dispatchEvent),z="unhandledrejection",G=function(t){var e;return!(!v(t)||!p(e=t.then))&&e},q=function(t,e){var n,r,i,o=e.value,a=1===e.state,s=a?t.ok:t.fail,c=t.resolve,l=t.reject,d=t.domain;try{s?(a||(2===e.rejection&&K(e),e.rejection=1),!0===s?n=o:(d&&d.enter(),n=s(o),d&&(d.exit(),i=!0)),n===t.promise?l(new H("Promise-chain cycle")):(r=G(n))?u(r,n,c,l):c(n)):l(o)}catch(t){d&&!i&&d.exit(),l(t)}},V=function(t,e){t.notified||(t.notified=!0,b((function(){for(var n,r=t.reactions;n=r.get();)q(n,t);t.notified=!1,e&&!t.rejection&&Y(t)})))},X=function(t,e,n){var r,i;W?((r=N.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),s.dispatchEvent(r)):r={promise:e,reason:n},!j&&(i=s["on"+t])?i(r):t===z&&x("Unhandled promise rejection",n)},Y=function(t){u(w,s,(function(){var e,n=t.facade,r=t.value;if($(t)&&(e=S((function(){a?U.emit("unhandledRejection",r,n):X(z,n,r)})),t.rejection=a||$(t)?2:1,e.error))throw e.value}))},$=function(t){return 1!==t.rejection&&!t.parent},K=function(t){u(w,s,(function(){var e=t.facade;a?U.emit("rejectionHandled",e):X("rejectionhandled",e,t.value)}))},J=function(t,e,n){return function(r){t(e,r,n)}},Z=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,V(t,!0))},Q=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw new H("Promise can't be resolved itself");var r=G(e);r?b((function(){var n={done:!1};try{u(r,e,J(Q,n,t),J(Z,n,t))}catch(e){Z(n,e,t)}})):(t.value=e,t.state=1,V(t,!1))}catch(e){Z({done:!1},e,t)}}};if(A&&(B=(I=function(e){y(this,B),h(e),u(t,this);var n=R(this);try{e(J(Q,n),J(Z,n))}catch(t){Z(n,t)}}).prototype,(t=function(t){L(this,{type:C,done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:null})}).prototype=c(B,"then",(function(t,e){var n=R(this),r=M(m(this,I));return n.parent=!0,r.ok=!p(t)||t,r.fail=p(e)&&e,r.domain=a?U.domain:void 0,0===n.state?n.reactions.add(r):b((function(){q(r,n)})),r.promise})),e=function(){var e=new t,n=R(e);this.promise=e,this.resolve=J(Q,n),this.reject=J(Z,n)},k.f=M=function(t){return t===I||void 0===t?new e(t):F(t)},!i&&p(E)&&D!==Object.prototype)){n=D.then,_||c(D,"then",(function(t,e){var r=this;return new I((function(t,e){u(n,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete D.constructor}catch(t){}l&&l(D,B)}r({global:!0,constructor:!0,wrap:!0,forced:A},{Promise:I}),d(I,C,!1,!0),f(C)}(),function(){if($i)return Ki;$i=1;var t=ir(),e=g(),n=Ot(),r=Gi(),i=Ni(),o=Ji();t({target:"Promise",stat:!0,forced:Zi()},{all:function(t){var a=this,s=r.f(a),u=s.resolve,c=s.reject,l=i((function(){var r=n(a.resolve),i=[],s=0,l=1;o(t,(function(t){var n=s++,o=!1;l++,e(r,a,t).then((function(t){o||(o=!0,i[n]=t,--l||u(i))}),c)})),--l||u(i)}));return l.error&&c(l.value),s.promise}})}(),function(){if(Qi)return to;Qi=1;var t=ir(),e=Jt(),n=Mi().CONSTRUCTOR,r=Ui(),i=vt(),o=ht(),a=ze(),s=r&&r.prototype;if(t({target:"Promise",proto:!0,forced:n,real:!0},{catch:function(t){return this.then(void 0,t)}}),!e&&o(r)){var u=i("Promise").prototype.catch;s.catch!==u&&a(s,"catch",u,{unsafe:!0})}}(),function(){if(eo)return no;eo=1;var t=ir(),e=g(),n=Ot(),r=Gi(),i=Ni(),o=Ji();t({target:"Promise",stat:!0,forced:Zi()},{race:function(t){var a=this,s=r.f(a),u=s.reject,c=i((function(){var r=n(a.resolve);o(t,(function(t){e(r,a,t).then(s.resolve,u)}))}));return c.error&&u(c.value),s.promise}})}(),function(){if(ro)return io;ro=1;var t=ir(),e=Gi();t({target:"Promise",stat:!0,forced:Mi().CONSTRUCTOR},{reject:function(t){var n=e.f(this);return(0,n.reject)(t),n.promise}})}(),function(){if(so)return co;so=1;var t=ir(),e=vt(),n=Jt(),r=Ui(),i=Mi().CONSTRUCTOR,o=lo(),a=e("Promise"),s=n&&!i;t({target:"Promise",stat:!0,forced:n||i},{resolve:function(t){return o(s&&this===a?r:this,t)}})}());var fo,ho,po,vo,yo,mo,go,wo,bo={},xo={};function So(){if(ho)return fo;ho=1;var t=pn(),e=vn();return fo=Object.keys||function(n){return t(n,e)}}function Oo(){if(yo)return vo;yo=1;var t,e=we(),n=function(){if(po)return xo;po=1;var t=y(),e=ge(),n=be(),r=we(),i=ft(),o=So();return xo.f=t&&!e?Object.defineProperties:function(t,e){r(t);for(var a,s=i(e),u=o(e),c=u.length,l=0;c>l;)n.f(t,a=u[l++],s[a]);return t},xo}(),r=vn(),i=Me(),o=Ai(),a=se(),s=Ue(),u="prototype",c="script",l=s("IE_PROTO"),d=function(){},f=function(t){return"<"+c+">"+t+"</"+c+">"},h=function(t){t.write(f("")),t.close();var e=t.parentWindow.Object;return t=null,e},p=function(){try{t=new ActiveXObject("htmlfile")}catch(t){}var e,n,i;p="undefined"!=typeof document?document.domain&&t?h(t):(n=a("iframe"),i="java"+c+":",n.style.display="none",o.appendChild(n),n.src=String(i),(e=n.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F):h(t);for(var s=r.length;s--;)delete p[u][r[s]];return p()};return i[l]=!0,vo=Object.create||function(t,r){var i;return null!==t?(d[u]=e(t),i=new d,d[u]=null,i[l]=t):i=p(),void 0===r?i:n.f(i,r)}}function Po(){if(go)return mo;go=1;var t=ie(),e=Oo(),n=be().f,r=t("unscopables"),i=Array.prototype;return void 0===i[r]&&n(i,r,{configurable:!0,value:e(null)}),mo=function(t){i[r][t]=!0}}!function(){if(wo)return bo;wo=1;var t=ir(),e=hn().includes,n=v(),r=Po();t({target:"Array",proto:!0,forced:n((function(){return!Array(1).includes()}))},{includes:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}}),r("includes")}();var Eo,To,ko,Co={};!function(){if(ko)return Co;ko=1;var t=ir(),e=function(){if(To)return Eo;To=1;var t=ee(),e=ln(),n=fn();return Eo=function(r){for(var i=t(this),o=n(i),a=arguments.length,s=e(a>1?arguments[1]:void 0,o),u=a>2?arguments[2]:void 0,c=void 0===u?o:e(u,o);c>s;)i[s++]=r;return i},Eo}(),n=Po();t({target:"Array",proto:!0},{fill:e}),n("fill")}();var Ao="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||{},jo="URLSearchParams"in Ao,_o="Symbol"in Ao&&"iterator"in Symbol,Ro="FileReader"in Ao&&"Blob"in Ao&&function(){try{return new Blob,!0}catch(t){return!1}}(),Lo="FormData"in Ao,Do="ArrayBuffer"in Ao;if(Do)var Io=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Bo=ArrayBuffer.isView||function(t){return t&&Io.indexOf(Object.prototype.toString.call(t))>-1};function Ho(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function No(t){return"string"!=typeof t&&(t=String(t)),t}function Uo(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return _o&&(e[Symbol.iterator]=function(){return e}),e}function Mo(t){this.map={},t instanceof Mo?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){if(2!=t.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+t.length);this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function Fo(t){if(!t._noBody)return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function Wo(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function zo(t){var e=new FileReader,n=Wo(e);return e.readAsArrayBuffer(t),n}function Go(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function qo(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:Ro&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:Lo&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:jo&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():Do&&Ro&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=Go(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Do&&(ArrayBuffer.prototype.isPrototypeOf(t)||Bo(t))?this._bodyArrayBuffer=Go(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):jo&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Ro&&(this.blob=function(){var t=Fo(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=Fo(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(Ro)return this.blob().then(zo);throw new Error("could not read as ArrayBuffer")},this.text=function(){var t,e,n,r,i,o=Fo(this);if(o)return o;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=Wo(e),r=/charset=([A-Za-z0-9_-]+)/.exec(t.type),i=r?r[1]:"utf-8",e.readAsText(t,i),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Lo&&(this.formData=function(){return this.text().then(Yo)}),this.json=function(){return this.text().then(JSON.parse)},this}Mo.prototype.append=function(t,e){t=Ho(t),e=No(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},Mo.prototype.delete=function(t){delete this.map[Ho(t)]},Mo.prototype.get=function(t){return t=Ho(t),this.has(t)?this.map[t]:null},Mo.prototype.has=function(t){return this.map.hasOwnProperty(Ho(t))},Mo.prototype.set=function(t,e){this.map[Ho(t)]=No(e)},Mo.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},Mo.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),Uo(t)},Mo.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),Uo(t)},Mo.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),Uo(t)},_o&&(Mo.prototype[Symbol.iterator]=Mo.prototype.entries);var Vo=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Xo(t,e){if(!(this instanceof Xo))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(e=e||{}).body;if(t instanceof Xo){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new Mo(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new Mo(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),Vo.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in Ao)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function Yo(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function $o(t,e){if(!(this instanceof $o))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new Mo(e.headers),this.url=e.url||"",this._initBody(t)}Xo.prototype.clone=function(){return new Xo(this,{body:this._bodyInit})},qo.call(Xo.prototype),qo.call($o.prototype),$o.prototype.clone=function(){return new $o(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Mo(this.headers),url:this.url})},$o.error=function(){var t=new $o(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var Ko=[301,302,303,307,308];$o.redirect=function(t,e){if(-1===Ko.indexOf(e))throw new RangeError("Invalid status code");return new $o(null,{status:e,headers:{location:t}})};var Jo=Ao.DOMException;try{new Jo}catch(t){(Jo=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),Jo.prototype.constructor=Jo}function Zo(t,e){return new Promise((function(n,r){var i=new Xo(t,e);if(i.signal&&i.signal.aborted)return r(new Jo("Aborted","AbortError"));var o=new XMLHttpRequest;function a(){o.abort()}if(o.onload=function(){var t,e,r={statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",e=new Mo,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();try{e.append(r,i)}catch(t){}}})),e)};0===i.url.indexOf("file://")&&(o.status<200||o.status>599)?r.status=200:r.status=o.status,r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var a="response"in o?o.response:o.responseText;setTimeout((function(){n(new $o(a,r))}),0)},o.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request timed out"))}),0)},o.onabort=function(){setTimeout((function(){r(new Jo("Aborted","AbortError"))}),0)},o.open(i.method,function(t){try{return""===t&&Ao.location.href?Ao.location.href:t}catch(e){return t}}(i.url),!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&(Ro?o.responseType="blob":Do&&(o.responseType="arraybuffer")),e&&"object"==typeof e.headers&&!(e.headers instanceof Mo||Ao.Headers&&e.headers instanceof Ao.Headers)){var s=[];Object.getOwnPropertyNames(e.headers).forEach((function(t){s.push(Ho(t)),o.setRequestHeader(t,No(e.headers[t]))})),i.headers.forEach((function(t,e){-1===s.indexOf(e)&&o.setRequestHeader(e,t)}))}else i.headers.forEach((function(t,e){o.setRequestHeader(e,t)}));i.signal&&(i.signal.addEventListener("abort",a),o.onreadystatechange=function(){4===o.readyState&&i.signal.removeEventListener("abort",a)}),o.send(void 0===i._bodyInit?null:i._bodyInit)}))}Zo.polyfill=!0,Ao.fetch||(Ao.fetch=Zo,Ao.Headers=Mo,Ao.Request=Xo,Ao.Response=$o),"undefined"==typeof CanvasRenderingContext2D||CanvasRenderingContext2D.prototype.resetTransform||(CanvasRenderingContext2D.prototype.resetTransform=function(){this.setTransform(1,0,0,1,0,0)});!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}("@keyframes watermark{0%{background-position:0 0}25%{background-position:100% 100%}50%{background-position:100% 0}75%{background-position:0 100%}to{background-position:0 0}}@keyframes watermark-horizontal{0%{background-position-x:0}to{background-position-x:100%}}@keyframes watermark-vertical{0%{background-position-y:0}to{background-position-y:100%}}");var Qo=function(t,e){return Qo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Qo(t,e)};var ta=function(){return ta=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ta.apply(this,arguments)};function ea(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function na(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}"function"==typeof SuppressedError&&SuppressedError;var ra=function(t){return t.toDataURL("image/png",1)},ia=function(t){return"function"==typeof t},oa=function(t){return void 0===t},aa=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n="http://www.w3.org/2000/svg");var r=document.createElementNS(n,t);for(var i in e)r.setAttribute(i,e[i]);return r},sa=function(t,e){return ea(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return na(this,(function(d){switch(d.label){case 0:return n=aa("svg",{xmlns:"http://www.w3.org/2000/svg"}),(r=document.createElement("div")).setAttribute("xmlns","http://www.w3.org/1999/xhtml"),r.style.cssText="\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  font: ".concat(t.font,";\n  color: ").concat(e.fontColor,";\n"),r.innerHTML="<div class='rich-text-content'>".concat(e.content,"</div>"),document.body.appendChild(r),[4,ua(r)];case 1:return d.sent(),i=null===(l=r.querySelector(".rich-text-content"))||void 0===l?void 0:l.getBoundingClientRect(),o=null==i?void 0:i.width,a=null==i?void 0:i.height,document.body.removeChild(r),s=e.richTextWidth||o||e.width,u=e.richTextHeight||a||e.height,n.setAttribute("width",s.toString()),n.setAttribute("height",u.toString()),(c=aa("foreignObject",{width:s.toString(),height:u.toString()})).appendChild(r),n.appendChild(c),[2,{element:n,width:s,height:u}]}}))}))};function ua(t){return ea(this,void 0,void 0,(function(){var e,n,r,i,o;return na(this,(function(a){switch(a.label){case 0:e=t.querySelectorAll("img"),n=function(t){var e,n,r,i;return na(this,(function(o){switch(o.label){case 0:if(!(e=t.getAttribute("src")))return[3,6];o.label=1;case 1:return o.trys.push([1,5,,6]),[4,fetch(e)];case 2:return[4,o.sent().blob()];case 3:return n=o.sent(),[4,new Promise((function(t,e){var r=new FileReader;r.onloadend=function(){return t(r.result)},r.onerror=e,r.readAsDataURL(n)}))];case 4:return r=o.sent(),"string"==typeof r&&t.setAttribute("src",r),[3,6];case 5:return i=o.sent(),console.error("Error converting ".concat(e," to base64:"),i),[3,6];case 6:return[2]}}))},r=0,i=Array.from(e),a.label=1;case 1:return r<i.length?(o=i[r],[5,n(o)]):[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))}var ca=function(t,e){return oa(t)?e:t},la=function(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=void 0);var r=new Image;return r.setAttribute("crossOrigin","anonymous"),!oa(e)&&(r.width=e),!oa(n)&&(r.height=n),r.src=t,new Promise((function(t){r.onload=function(){t(r)}}))},da={width:300,height:300,rotate:45,layout:"default",auxiliaryLine:!1,translatePlacement:"middle",contentType:"text",content:"hello watermark-js-plus",textType:"fill",imageWidth:0,imageHeight:0,lineHeight:30,zIndex:2147483647,backgroundPosition:"0 0",backgroundRepeat:"repeat",fontSize:"20px",fontFamily:"sans-serif",fontStyle:"",fontVariant:"",fontColor:"#000",fontWeight:"normal",filter:"none",letterSpacing:"0px",wordSpacing:"0px",globalAlpha:.5,mode:"default",mutationObserve:!0,monitorProtection:!1,movable:!1,parent:"body",onSuccess:function(){},onBeforeDestroy:function(){},onDestroyed:function(){},onObserveError:function(){}},fa=function(t){"undefined"!=typeof window&&t&&Object.defineProperty(window,"MutationObserver",{writable:!1,configurable:!1})},ha=function(){function t(e,n){this.props=e,this.options=n,this.canvas=t.createCanvas(this.options.width,this.options.height),this.recommendOptions=function(t,e,n){var r=t.getContext("2d");if(null===r)throw new Error("get context error");r.font="".concat(e.fontStyle," ").concat(e.fontVariant," ").concat(e.fontWeight," ").concat(e.fontSize," ").concat(e.fontFamily),r.filter=e.filter,r.letterSpacing=e.letterSpacing,r.wordSpacing=e.wordSpacing,(null==e?void 0:e.rotate)&&(e.rotate=(360-e.rotate%360)*(Math.PI/180)),oa(n.textRowMaxWidth)&&(e.textRowMaxWidth=e.width);var i={image:{rect:{width:e.imageWidth,height:e.imageHeight},position:{x:0,y:0}},textLine:{data:[],yOffsetValue:0},advancedStyleParams:{linear:{x0:0,x1:0},radial:{x0:0,y0:0,r0:0,x1:0,y1:0,r1:0},conic:{x:0,y:0,startAngle:0},pattern:{}}};switch(e.contentType){case"text":i.textLine.data=[e.content];break;case"multi-line-text":i.textLine.data=function(t,e,n){for(var r=[],i="",o="",a=0,s=e.length;a<s;a++)"\n"!==(o=e.charAt(a))?(i+=o,t.measureText(i).width>n&&(r.push(i.substring(0,i.length-1)),i="",a--)):(r.push(i),i="");return r.push(i),r}(r,e.content,e.textRowMaxWidth)}var o=e.width/2,a=e.height/2,s="middle",u="center";switch(oa(null==n?void 0:n.translateX)||oa(null==n?void 0:n.translateY)?(i.advancedStyleParams.linear.x0=-e.width/2,i.advancedStyleParams.linear.x1=e.width/2,i.advancedStyleParams.radial.r0=0,i.advancedStyleParams.radial.r1=e.width/2):(o=null==n?void 0:n.translateX,a=null==n?void 0:n.translateY,s="top",u="left"),n.translatePlacement){case"top":o=e.width/2,a=0,s="top",i.advancedStyleParams.linear.x0=-e.width/2,i.advancedStyleParams.linear.x1=e.width/2,i.advancedStyleParams.radial.y0=i.textLine.data.length*e.lineHeight/2,i.advancedStyleParams.radial.y1=i.textLine.data.length*e.lineHeight/2,i.advancedStyleParams.conic.y=i.textLine.data.length*e.lineHeight/2;break;case"top-start":o=0,a=0,s="top",u="start",i.advancedStyleParams.linear.x0=0,i.advancedStyleParams.linear.x1=e.width,i.advancedStyleParams.radial.x0=e.width/2,i.advancedStyleParams.radial.y0=i.textLine.data.length*e.lineHeight/2,i.advancedStyleParams.radial.x1=e.width/2,i.advancedStyleParams.radial.y1=i.textLine.data.length*e.lineHeight/2,i.advancedStyleParams.conic.x=e.width/2,i.advancedStyleParams.conic.y=i.textLine.data.length*e.lineHeight/2;break;case"top-end":o=e.width,a=0,s="top",u="end",i.advancedStyleParams.linear.x0=0,i.advancedStyleParams.linear.x1=-e.width,i.advancedStyleParams.radial.x0=-e.width/2,i.advancedStyleParams.radial.y0=i.textLine.data.length*e.lineHeight/2,i.advancedStyleParams.radial.x1=-e.width/2,i.advancedStyleParams.radial.y1=i.textLine.data.length*e.lineHeight/2,i.advancedStyleParams.conic.x=-e.width/2,i.advancedStyleParams.conic.y=i.textLine.data.length*e.lineHeight/2;break;case"bottom":o=e.width/2,a=e.height,s="bottom",i.advancedStyleParams.linear.x0=-e.width/2,i.advancedStyleParams.linear.x1=e.width/2,i.advancedStyleParams.radial.y0=-i.textLine.data.length*e.lineHeight/2,i.advancedStyleParams.radial.y1=-i.textLine.data.length*e.lineHeight/2,i.advancedStyleParams.conic.x=0,i.advancedStyleParams.conic.y=-i.textLine.data.length*e.lineHeight/2;break;case"bottom-start":o=0,a=e.height,s="bottom",u="start",i.advancedStyleParams.linear.x0=0,i.advancedStyleParams.linear.x1=e.width,i.advancedStyleParams.radial.x0=e.width/2,i.advancedStyleParams.radial.y0=-i.textLine.data.length*e.lineHeight/2,i.advancedStyleParams.radial.x1=e.width/2,i.advancedStyleParams.radial.y1=-i.textLine.data.length*e.lineHeight/2,i.advancedStyleParams.conic.x=e.width/2,i.advancedStyleParams.conic.y=-i.textLine.data.length*e.lineHeight/2;break;case"bottom-end":o=e.width,a=e.height,s="bottom",u="end",i.advancedStyleParams.linear.x0=0,i.advancedStyleParams.linear.x1=-e.width,i.advancedStyleParams.radial.x0=-e.width/2,i.advancedStyleParams.radial.y0=-i.textLine.data.length*e.lineHeight/2,i.advancedStyleParams.radial.x1=-e.width/2,i.advancedStyleParams.radial.y1=-i.textLine.data.length*e.lineHeight/2,i.advancedStyleParams.conic.x=-e.width/2,i.advancedStyleParams.conic.y=-i.textLine.data.length*e.lineHeight/2;break;case"left":o=0,a=e.height/2,u="start",i.advancedStyleParams.linear.x0=0,i.advancedStyleParams.linear.x1=e.width,i.advancedStyleParams.radial.x0=e.width/2,i.advancedStyleParams.radial.x1=e.width/2,i.advancedStyleParams.conic.x=e.width/2,i.advancedStyleParams.conic.y=0;break;case"right":o=e.width,a=e.height/2,u="end",i.advancedStyleParams.linear.x0=0,i.advancedStyleParams.linear.x1=-e.width,i.advancedStyleParams.radial.x0=-e.width/2,i.advancedStyleParams.radial.x1=-e.width/2,i.advancedStyleParams.conic.x=-e.width/2,i.advancedStyleParams.conic.y=0}if(e.translateX=o,e.translateY=a,oa(null==n?void 0:n.textBaseline)&&(e.textBaseline=s),oa(null==n?void 0:n.textAlign)&&(e.textAlign=u),["text","multi-line-text"].includes(e.contentType))switch(e.textBaseline){case"middle":i.textLine.yOffsetValue=(i.textLine.data.length-1)*e.lineHeight/2;break;case"bottom":case"alphabetic":case"ideographic":i.textLine.yOffsetValue=(i.textLine.data.length-1)*e.lineHeight+(e.lineHeight-parseInt(e.fontSize))/2;break;case"top":case"hanging":i.textLine.yOffsetValue=-e.lineHeight/2+parseInt(e.fontSize)/2}return i}(this.canvas,this.options,this.props)}return t.createCanvas=function(t,e){var n,r=window.devicePixelRatio||1,i=document.createElement("canvas");return i.width=t*r,i.height=e*r,i.style.width="".concat(t,"px"),i.style.height="".concat(e,"px"),null===(n=i.getContext("2d"))||void 0===n||n.setTransform(r,0,0,r,0,0),i},t.clearCanvas=function(t){var e=t.getContext("2d");if(null===e)throw new Error("get context error");e.restore(),e.resetTransform(),e.clearRect(0,0,t.width,t.height);var n=window.devicePixelRatio||1;e.setTransform(n,0,0,n,0,0)},t.prototype.getCanvas=function(){return this.canvas},t.prototype.clear=function(){t.clearCanvas(this.canvas)},t.prototype.draw=function(){var t=this,e=this.canvas.getContext("2d");if(null===e)throw new Error("get context error");return this.options.auxiliaryLine&&(e.beginPath(),e.rect(0,0,this.options.width,this.options.height),e.lineWidth=1,e.strokeStyle="#000",e.stroke(),e.closePath(),e.beginPath(),e.rect(this.options.translateX,this.options.translateY,1,1),e.lineWidth=1,e.strokeStyle="#f00",e.stroke(),e.closePath()),this.setStyle(e),e.save(),e.translate(this.options.translateX,this.options.translateY),e.rotate(this.options.rotate),new Promise((function(n){switch(t.options.contentType){case"text":t.drawText(e,n);break;case"image":t.drawImage(e,n);break;case"multi-line-text":t.drawMultiLineText(e,n);break;case"rich-text":t.drawRichText(e,n)}}))},t.prototype.setStyle=function(t){var e,n="fillStyle";"stroke"===this.options.textType&&(n="strokeStyle");var r=this.options.fontColor;if(null===(e=this.options)||void 0===e?void 0:e.advancedStyle)switch(this.options.advancedStyle.type){case"linear":r=this.createLinearGradient(t);break;case"radial":r=this.createRadialGradient(t);break;case"conic":r=this.createConicGradient(t);break;case"pattern":r=this.createPattern(t)}t[n]&&r&&(t[n]=r),this.options.textAlign&&(t.textAlign=this.options.textAlign),this.options.textBaseline&&(t.textBaseline=this.options.textBaseline),t.globalAlpha=this.options.globalAlpha,this.options.shadowStyle&&(t.shadowBlur=ca(this.options.shadowStyle.shadowBlur,0),t.shadowColor=ca(this.options.shadowStyle.shadowColor,"#00000000"),t.shadowOffsetX=ca(this.options.shadowStyle.shadowOffsetX,0),t.shadowOffsetY=ca(this.options.shadowStyle.shadowOffsetY,0)),ia(this.options.extraDrawFunc)&&this.options.extraDrawFunc(t)},t.prototype.createLinearGradient=function(t){var e,n,r,i,o,a,s,u,c,l,d,f,h,p,v,y=t.createLinearGradient(ca(null===(r=null===(n=null===(e=this.options.advancedStyle)||void 0===e?void 0:e.params)||void 0===n?void 0:n.linear)||void 0===r?void 0:r.x0,this.recommendOptions.advancedStyleParams.linear.x0),ca(null===(a=null===(o=null===(i=this.options.advancedStyle)||void 0===i?void 0:i.params)||void 0===o?void 0:o.linear)||void 0===a?void 0:a.y0,0),ca(null===(c=null===(u=null===(s=this.options.advancedStyle)||void 0===s?void 0:s.params)||void 0===u?void 0:u.linear)||void 0===c?void 0:c.x1,this.recommendOptions.advancedStyleParams.linear.x1),ca(null===(f=null===(d=null===(l=this.options.advancedStyle)||void 0===l?void 0:l.params)||void 0===d?void 0:d.linear)||void 0===f?void 0:f.y1,0));return null===(v=null===(p=null===(h=this.options)||void 0===h?void 0:h.advancedStyle)||void 0===p?void 0:p.colorStops)||void 0===v||v.forEach((function(t){y.addColorStop(t.offset,t.color)})),y},t.prototype.createConicGradient=function(t){var e,n,r,i,o,a,s,u,c,l,d,f,h,p,v,y=t.createConicGradient(ca(null===(i=null===(r=null===(n=null===(e=this.options)||void 0===e?void 0:e.advancedStyle)||void 0===n?void 0:n.params)||void 0===r?void 0:r.conic)||void 0===i?void 0:i.startAngle,0),ca(null===(u=null===(s=null===(a=null===(o=this.options)||void 0===o?void 0:o.advancedStyle)||void 0===a?void 0:a.params)||void 0===s?void 0:s.conic)||void 0===u?void 0:u.x,this.recommendOptions.advancedStyleParams.conic.x),ca(null===(f=null===(d=null===(l=null===(c=this.options)||void 0===c?void 0:c.advancedStyle)||void 0===l?void 0:l.params)||void 0===d?void 0:d.conic)||void 0===f?void 0:f.y,this.recommendOptions.advancedStyleParams.conic.y));return null===(v=null===(p=null===(h=this.options)||void 0===h?void 0:h.advancedStyle)||void 0===p?void 0:p.colorStops)||void 0===v||v.forEach((function(t){y.addColorStop(t.offset,t.color)})),y},t.prototype.createRadialGradient=function(t){var e,n,r,i,o,a,s,u,c,l,d,f,h,p,v,y,m,g,w,b,x,S,O,P,E,T,k,C=t.createRadialGradient(ca(null===(i=null===(r=null===(n=null===(e=this.options)||void 0===e?void 0:e.advancedStyle)||void 0===n?void 0:n.params)||void 0===r?void 0:r.radial)||void 0===i?void 0:i.x0,this.recommendOptions.advancedStyleParams.radial.x0),ca(null===(u=null===(s=null===(a=null===(o=this.options)||void 0===o?void 0:o.advancedStyle)||void 0===a?void 0:a.params)||void 0===s?void 0:s.radial)||void 0===u?void 0:u.y0,this.recommendOptions.advancedStyleParams.radial.y0),ca(null===(f=null===(d=null===(l=null===(c=this.options)||void 0===c?void 0:c.advancedStyle)||void 0===l?void 0:l.params)||void 0===d?void 0:d.radial)||void 0===f?void 0:f.r0,this.recommendOptions.advancedStyleParams.radial.r0),ca(null===(y=null===(v=null===(p=null===(h=this.options)||void 0===h?void 0:h.advancedStyle)||void 0===p?void 0:p.params)||void 0===v?void 0:v.radial)||void 0===y?void 0:y.x1,this.recommendOptions.advancedStyleParams.radial.x1),ca(null===(b=null===(w=null===(g=null===(m=this.options)||void 0===m?void 0:m.advancedStyle)||void 0===g?void 0:g.params)||void 0===w?void 0:w.radial)||void 0===b?void 0:b.y1,this.recommendOptions.advancedStyleParams.radial.y1),ca(null===(P=null===(O=null===(S=null===(x=this.options)||void 0===x?void 0:x.advancedStyle)||void 0===S?void 0:S.params)||void 0===O?void 0:O.radial)||void 0===P?void 0:P.r1,this.recommendOptions.advancedStyleParams.radial.r1));return null===(k=null===(T=null===(E=this.options)||void 0===E?void 0:E.advancedStyle)||void 0===T?void 0:T.colorStops)||void 0===k||k.forEach((function(t){C.addColorStop(t.offset,t.color)})),C},t.prototype.createPattern=function(t){var e,n,r,i,o,a,s,u;return t.createPattern(null===(i=null===(r=null===(n=null===(e=this.options)||void 0===e?void 0:e.advancedStyle)||void 0===n?void 0:n.params)||void 0===r?void 0:r.pattern)||void 0===i?void 0:i.image,(null===(u=null===(s=null===(a=null===(o=this.options)||void 0===o?void 0:o.advancedStyle)||void 0===a?void 0:a.params)||void 0===s?void 0:s.pattern)||void 0===u?void 0:u.repetition)||"")},t.prototype.setText=function(t,e){var n="fillText";"stroke"===this.options.textType&&(n="strokeText"),t[n]&&t[n](e.text,e.x,e.y,e.maxWidth)},t.prototype.drawText=function(t,e){this.setText(t,{text:this.options.content,x:0,y:0-this.recommendOptions.textLine.yOffsetValue,maxWidth:this.options.textRowMaxWidth||this.options.width}),e(t.canvas)},t.prototype.drawImage=function(t,e){var n=this;la(this.options.image).then((function(r){var i=n.getImageRect(r),o=i.width,a=i.height,s=n.getDrawImagePosition(o,a);t.drawImage(r,s.x,s.y,o,a),e(t.canvas)}))},t.prototype.drawMultiLineText=function(t,e){var n=this,r=this.recommendOptions.textLine.data,i=this.recommendOptions.textLine.yOffsetValue;r.forEach((function(e,r){n.setText(t,{text:e,x:0,y:n.options.lineHeight*r-i,maxWidth:n.options.textRowMaxWidth||n.options.width})})),e(t.canvas)},t.prototype.drawRichText=function(t,e){return ea(this,void 0,void 0,(function(){var n,r=this;return na(this,(function(i){switch(i.label){case 0:return[4,sa(t,this.options)];case 1:return n=i.sent(),la((o=n.element,a=o.outerHTML.replace(/<(img|br|input|hr|embed)(.*?)>/g,"<$1$2/>").replace(/\n/g,"").replace(/\t/g,"").replace(/#/g,"%23"),"data:image/svg+xml;charset=utf-8,".concat(a)),n.width,n.height).then((function(n){var i=r.getDrawImagePosition(n.width,n.height);t.drawImage(n,i.x,i.y,n.width,n.height),e(t.canvas)})),[2]}var o,a}))}))},t.prototype.getImageRect=function(t){var e={width:this.options.imageWidth||0,height:this.options.imageHeight||0};switch(!0){case 0!==e.width&&0===e.height:e.height=e.width*t.height/t.width;break;case 0===e.width&&0!==e.height:e.width=e.height*t.width/t.height;break;case 0===e.width&&0===e.height:e.width=t.width,e.height=t.height}return e},t.prototype.getDrawImagePosition=function(t,e){var n,r,i={x:-t/2,y:-e/2};switch(this.options.translatePlacement){case"top":i.x=-t/2,i.y=0;break;case"top-start":i.x=0,i.y=0;break;case"top-end":i.x=-t,i.y=0;break;case"bottom":i.x=-t/2,i.y=-e;break;case"bottom-start":i.x=0,i.y=-e;break;case"bottom-end":i.x=-t,i.y=-e;break;case"left":i.x=0,i.y=-e/2;break;case"right":i.x=-t,i.y=-e/2}return!oa(null===(n=this.props)||void 0===n?void 0:n.translateX)&&(i.x=0),!oa(null===(r=this.props)||void 0===r?void 0:r.translateY)&&(i.y=0),i},t}(),pa=function(){function t(t,e){var n,r,i,o,a,s,u;this.options=t,this.partialWidth=this.options.width,this.partialHeight=this.options.height,this.rows=(null===(n=this.options.gridLayoutOptions)||void 0===n?void 0:n.rows)||1,this.cols=(null===(r=this.options.gridLayoutOptions)||void 0===r?void 0:r.cols)||1,this.matrix=(null===(i=this.options.gridLayoutOptions)||void 0===i?void 0:i.matrix)||(a=this.rows,s=this.cols,u=1,Array.from({length:a},(function(){return new Array(s).fill(u)}))),this.gap=(null===(o=this.options.gridLayoutOptions)||void 0===o?void 0:o.gap)||[0,0],this.partialCanvas=e}return t.prototype.draw=function(){var t,e,n,r,i,o,a,s,u=ha.createCanvas((null===(t=this.options.gridLayoutOptions)||void 0===t?void 0:t.width)||this.partialWidth*this.cols+this.gap[0]*this.cols,(null===(e=this.options.gridLayoutOptions)||void 0===e?void 0:e.height)||this.partialHeight*this.rows+this.gap[1]*this.rows),c=u.getContext("2d");(null===(n=this.options.gridLayoutOptions)||void 0===n?void 0:n.backgroundImage)&&(null==c||c.drawImage(null===(r=this.options.gridLayoutOptions)||void 0===r?void 0:r.backgroundImage,0,0,null===(i=this.options.gridLayoutOptions)||void 0===i?void 0:i.width,null===(o=this.options.gridLayoutOptions)||void 0===o?void 0:o.height));for(var l=0;l<this.rows;l++)for(var d=0;d<this.cols;d++)(null===(s=null===(a=this.matrix)||void 0===a?void 0:a[l])||void 0===s?void 0:s[d])&&(null==c||c.drawImage(this.partialCanvas,this.partialWidth*d+this.gap[0]*d,this.partialHeight*l+this.gap[1]*l,this.partialWidth,this.partialHeight));return u},t}(),va=function(t,e){return"grid"===t.layout?new pa(t,e).draw():e},ya=function(){function t(t){void 0===t&&(t={}),this.parentElement=document.body,this.isCreating=!1,this.props=t,this.options=ta(ta({},da),t),this.changeParentElement(this.options.parent),this.watermarkCanvas=new ha(this.props,this.options),fa(this.options.monitorProtection)}return t.prototype.changeOptions=function(){return ea(this,arguments,void 0,(function(t,e,n){return void 0===t&&(t={}),void 0===e&&(e="overwrite"),void 0===n&&(n=!0),na(this,(function(r){switch(r.label){case 0:return this.initConfigData(t,e),fa(this.options.monitorProtection),n?(this.remove(),[4,this.create()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.create=function(){return ea(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l,d;return na(this,(function(f){switch(f.label){case 0:return this.isCreating?[2]:(this.isCreating=!0,this.validateUnique()&&this.validateContent()?(t=oa(this.watermarkDom),[4,null===(o=this.watermarkCanvas)||void 0===o?void 0:o.draw()]):(this.isCreating=!1,[2]));case 1:if(f.sent(),this.layoutCanvas=va(this.options,null===(a=this.watermarkCanvas)||void 0===a?void 0:a.getCanvas()),e=ra(this.layoutCanvas),null===(s=this.watermarkCanvas)||void 0===s||s.clear(),this.watermarkDom=document.createElement("div"),n=document.createElement("div"),this.watermarkDom.__WATERMARK__="watermark",this.watermarkDom.__WATERMARK__INSTANCE__=this,r=this.checkParentElementType(),this.watermarkDom.style.cssText="\n      z-index:".concat(this.options.zIndex,"!important;display:block!important;visibility:visible!important;transform:none!important;scale:none!important;\n      ").concat("custom"===r?"top:0!important;bottom:0!important;left:0!important;right:0!important;height:100%!important;pointer-events:none!important;position:absolute!important;":"position:relative!important;","\n    "),i=function(t){var e,n,r;if("grid"===t.layout){var i=(null===(e=t.gridLayoutOptions)||void 0===e?void 0:e.cols)||1,o=(null===(n=t.gridLayoutOptions)||void 0===n?void 0:n.rows)||1,a=(null===(r=t.gridLayoutOptions)||void 0===r?void 0:r.gap)||[0,0];return[t.width*i+a[0]*i,t.height*o+a[1]*o]}return[t.width,t.height]}(this.options),n.style.cssText="\n      display:block!important;visibility:visible!important;pointer-events:none;top:0;bottom:0;left:0;right:0;transform:none!important;scale:none!important;\n      position:".concat("root"===r?"fixed":"absolute","!important;-webkit-print-color-adjust:exact!important;width:100%!important;height:100%!important;\n      z-index:").concat(this.options.zIndex,"!important;background-image:url(").concat(e,")!important;background-repeat:").concat(this.options.backgroundRepeat,"!important;\n      background-size:").concat(i[0],"px ").concat(i[1],"px!important;background-position:").concat(this.options.backgroundPosition,";\n      ").concat(function(t,e){if(!t)return"";var n=6*Math.random()+2,r=2*Math.random()+2;switch(e){case"repeat":return"animation: 200s linear 0s infinite alternate watermark !important;";case"repeat-x":return"animation: ".concat(n,"s ease-in 0s infinite alternate watermark-vertical !important;'");case"repeat-y":return"animation: ".concat(r,"s ease-out 0s infinite alternate watermark-horizontal !important;'");case"no-repeat":return"animation: ".concat(n,"s ease-in 0s infinite alternate watermark-horizontal, ").concat(r,"s ease-out 0s infinite alternate watermark-vertical !important;");default:return""}}(this.options.movable,this.options.backgroundRepeat),"\n    "),this.watermarkDom.appendChild(n),this.parentElement.appendChild(this.watermarkDom),this.options.mutationObserve)try{this.bindMutationObserve()}catch(t){null===(c=(u=this.options).onObserveError)||void 0===c||c.call(u)}return t&&(null===(d=(l=this.options).onSuccess)||void 0===d||d.call(l)),this.isCreating=!1,[2]}}))}))},t.prototype.destroy=function(){this.remove(),this.watermarkDom=void 0},t.prototype.check=function(){return ea(this,void 0,void 0,(function(){return na(this,(function(t){return[2,this.parentElement.contains(this.watermarkDom)]}))}))},t.prototype.remove=function(){var t,e,n,r,i,o,a,s;null===(e=(t=this.options).onBeforeDestroy)||void 0===e||e.call(t),null===(n=this.observer)||void 0===n||n.disconnect(),null===(r=this.parentObserve)||void 0===r||r.disconnect(),null===(o=null===(i=this.watermarkDom)||void 0===i?void 0:i.parentNode)||void 0===o||o.removeChild(this.watermarkDom),null===(s=(a=this.options).onDestroyed)||void 0===s||s.call(a)},t.prototype.initConfigData=function(t,e){var n=this;void 0===e&&(e="overwrite"),"append"===e?Object.keys(t).forEach((function(e){n.props&&(n.props[e]=t[e])})):this.props=t,this.options=ta(ta({},da),this.props),this.changeParentElement(this.options.parent),this.watermarkCanvas=new ha(this.props,this.options)},t.prototype.changeParentElement=function(t){if("string"==typeof t){var e=document.querySelector(t);e&&(this.parentElement=e)}else this.parentElement=t;this.parentElement||console.error("[WatermarkJsPlus]: please pass a valid parent element.")},t.prototype.validateUnique=function(){var t=!0;return Array.from(this.parentElement.childNodes).forEach((function(e){t&&Object.hasOwnProperty.call(e,"__WATERMARK__")&&(t=!1)})),t},t.prototype.validateContent=function(){switch(this.options.contentType){case"image":return Object.hasOwnProperty.call(this.options,"image");case"multi-line-text":case"rich-text":case"text":return this.options.content.length>0}},t.prototype.checkParentElementType=function(){return["html","body"].includes(this.parentElement.tagName.toLocaleLowerCase())?"root":"custom"},t.prototype.bindMutationObserve=function(){var t=this;this.watermarkDom&&(this.observer=new MutationObserver((function(e){return ea(t,void 0,void 0,(function(){return na(this,(function(t){switch(t.label){case 0:return e.length>0?(this.remove(),[4,this.create()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})),this.observer.observe(this.watermarkDom,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),this.parentObserve=new MutationObserver((function(e){return ea(t,void 0,void 0,(function(){var t,n,r,i;return na(this,(function(o){switch(o.label){case 0:t=0,n=e,o.label=1;case 1:return t<n.length?(null==(r=n[t])?void 0:r.target)===this.watermarkDom||(null===(i=null==r?void 0:r.removedNodes)||void 0===i?void 0:i[0])===this.watermarkDom||"childList"===r.type&&r.target===this.parentElement&&r.target.lastChild!==this.watermarkDom?(this.remove(),[4,this.create()]):[3,3]:[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))})),this.parentObserve.observe(this.parentElement,{attributes:!0,childList:!0,subtree:!0,characterData:!0}))},t}(),ma=function(t){function e(e){void 0===e&&(e={});return t.call(this,ta(ta({},e),{globalAlpha:.005,mode:"blind"}))||this}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Qo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.changeOptions=function(){return ea(this,arguments,void 0,(function(t,e,n){return void 0===t&&(t={}),void 0===e&&(e="overwrite"),void 0===n&&(n=!0),na(this,(function(r){switch(r.label){case 0:return t.globalAlpha=.005,t.mode="blind",this.initConfigData(t,e),fa(this.options.monitorProtection),n?(this.remove(),[4,this.create()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.decode=function(t){var e=t.url,n=void 0===e?"":e,r=t.fillColor,i=void 0===r?"#000":r,o=t.compositeOperation,a=void 0===o?"color-burn":o,s=t.mode,u=void 0===s?"canvas":s,c=t.compositeTimes,l=void 0===c?3:c,d=t.onSuccess;if(n&&"canvas"===u){var f=new Image;f.src=n,f.addEventListener("load",(function(){var t=f.width,e=f.height,n=ha.createCanvas(t,e),r=n.getContext("2d");if(!r)throw new Error("get context error");r.drawImage(f,0,0,t,e),r.globalCompositeOperation=a,r.fillStyle=i;for(var o=0;o<l;o++)r.fillRect(0,0,t,e);var s=ra(n);ia(d)&&(null==d||d(s))}))}},e}(ya),ga=function(){function t(t){var e,n;void 0===t&&(t={}),this.drew=!1,this.props=t,this.options=ta(ta({},da),t),this.props.crossOrigin&&(null===(e=this.props.dom)||void 0===e||e.setAttribute("crossOrigin","anonymous")),this.watermarkCanvas=new ha(this.props,this.options),this.originalSrc=null===(n=this.props.dom)||void 0===n?void 0:n.src,this.backgroundImage=this.getBackgroundImage()}return t.prototype.create=function(){return ea(this,void 0,void 0,(function(){var t,e,n,r,i;return na(this,(function(o){switch(o.label){case 0:return this.drew?[2]:[4,null===(t=this.watermarkCanvas)||void 0===t?void 0:t.draw()];case 1:return o.sent(),this.options.layout="grid",this.options.gridLayoutOptions=ta(ta({},this.options.gridLayoutOptions),{width:null===(e=this.backgroundImage)||void 0===e?void 0:e.width,height:null===(n=this.backgroundImage)||void 0===n?void 0:n.height,backgroundImage:this.backgroundImage}),this.layoutCanvas=va(this.options,null===(r=this.watermarkCanvas)||void 0===r?void 0:r.getCanvas()),this.options.dom.src=ra(this.layoutCanvas),null===(i=this.watermarkCanvas)||void 0===i||i.clear(),this.drew=!0,[2]}}))}))},t.prototype.destroy=function(){this.options.dom.src=this.originalSrc,this.drew=!1},t.prototype.getBackgroundImage=function(){if(this.options.dom)return this.options.dom},t}();t.BlindWatermark=ma,t.ImageWatermark=ga,t.Watermark=ya}));
